{"version":3,"sources":["app/App.module.scss","app/App.tsx","app/hooks.ts","reportWebVitals.ts","index.tsx"],"names":["module","exports","storageOptions","value","label","App","useState","iframeVisible","setIframeVisible","initValues","useMemo","searchParams","URLSearchParams","window","location","search","maybeStorageType","get","storageType","undefined","useStorageAccessAPI","localState","setLocalState","useEffect","localStateForSearch","searchURLPart","toString","console","log","history","pushState","setStorageType","useCallback","newStorageType","prevState","setUseRequestStorageAPI","newUseRequestStorageAPI","useLocalState","iframeUrl","localStorage","cookie","className","styles","topContainer","host","htmlFor","size","checkedChildren","unCheckedChildren","onChange","defaultChecked","Group","options","e","target","optionType","buttonStyle","IFrameContent","url","SHOWCOOKIE2ME_URL","memo","spinning","setSpinning","clsx","invisible","title","iframe","src","onLoad","displayName","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.988519af.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__248Ek\",\"AppHeader\":\"App_AppHeader__3789_\",\"AppLink\":\"App_AppLink__9W8vc\",\"topContainer\":\"App_topContainer__1MYKD\",\"tabsContainer\":\"App_tabsContainer__2qsJS\",\"iframe\":\"App_iframe__JounH\",\"iframeVisible\":\"App_iframeVisible__1fvY7\",\"invisible\":\"App_invisible__PFf-1\",\"App-logo-spin\":\"App_App-logo-spin__QlDWQ\"};","import React, { FC, memo, useEffect, useMemo, useState } from 'react'\nimport styles from './App.module.scss'\nimport { Radio, Spin, Switch } from 'antd'\nimport clsx from 'clsx'\nimport { StorageType, useLocalState } from './hooks'\n\nconst SHOWCOOKIE2ME_URL = process.env.REACT_APP_SHOWCOOKIE2ME_URL\n\nconst storageOptions: { label: string, value: StorageType }[] = [{\n    value: 'cookie',\n    label: 'Cookies',\n}, { value: 'localStorage', label: 'Local Storage' }]\n\nexport function App() {\n    const [iframeVisible, setIframeVisible] = useState<boolean>(false)\n    const { setUseRequestStorageAPI, setStorageType, localState: { useStorageAccessAPI, storageType } } = useLocalState()\n    const iframeUrl = useMemo(() => {\n        const storageTypeToUrlPart: Record<StorageType, string> = {\n            localStorage: 'local-storage',\n            cookie: 'cookies',\n        }\n        return `${storageTypeToUrlPart[storageType]}/${useStorageAccessAPI ? '1' : ''}`\n    }, [useStorageAccessAPI, storageType])\n\n    return (\n        <div className={styles.App}>\n            <div className={styles.topContainer}>\n                <h2>A site {window.location.host}</h2>\n\n                <div className=\"\">\n                    <label htmlFor=\"firstname1\" className=\"\">Iframe border <Switch size=\"default\"\n                                                                                   checkedChildren=\"visible\"\n                                                                                   unCheckedChildren=\"hidden\"\n                                                                                   onChange={setIframeVisible}\n                                                                                   defaultChecked={iframeVisible} /></label>\n                    <br /><br />\n                    <label htmlFor=\"firstname1\" className=\"\">Storage method</label>\n                    <div className=\"\">\n                        <Radio.Group\n                            options={storageOptions}\n                            value={storageType}\n                            onChange={e => setStorageType(e.target.value)}\n                            optionType=\"button\"\n                            size={'large'}\n                            buttonStyle=\"solid\" />\n                    </div>\n                    <br />\n                    <label htmlFor=\"firstname1\" className=\"\">Storage Access API <Switch size=\"default\"\n                                                                                        onChange={setUseRequestStorageAPI}\n                                                                                        checkedChildren=\"on\"\n                                                                                        unCheckedChildren=\"off\"\n                                                                                        defaultChecked={useStorageAccessAPI} /></label>\n                </div>\n\n            </div>\n            <IFrameContent url={SHOWCOOKIE2ME_URL + '/' + iframeUrl} iframeVisible={iframeVisible} />\n\n        </div>\n    )\n}\n\nconst IFrameContent: FC<{ url: string, iframeVisible: boolean }> = memo(({ iframeVisible, url }) => {\n    const [spinning, setSpinning] = useState<boolean>(true)\n    useEffect(() => {\n        setSpinning(true)\n    }, [url])\n\n    return <>\n        <p className={clsx({ [styles.invisible]: iframeVisible })}>Iframe\n            URL: {url}</p>\n        <Spin size=\"large\" spinning={spinning}>\n            <iframe title=\"A note maker\"\n                    className={clsx(styles.iframe, { [styles.iframeVisible]: iframeVisible })}\n                    src={url}\n                    onLoad={() => setSpinning(false)}\n            />\n        </Spin>\n    </>\n})\n\nIFrameContent.displayName = 'IFrameContent'\n","import { useCallback, useEffect, useMemo, useState } from 'react'\nimport { BooleansToStringRecord } from './type-utils'\n\nexport type StorageType = 'cookie' | 'localStorage';\ntype LocalState = { useStorageAccessAPI: boolean, storageType: StorageType }\n\ntype LocalStageForSearch = BooleansToStringRecord<LocalState>;\n\nexport function useLocalState() {\n    const initValues = useMemo<LocalState>(() => {\n        const searchParams = new URLSearchParams(window.location.search)\n        const maybeStorageType = searchParams.get('storageType')\n        const storageType = (maybeStorageType === 'cookie' || maybeStorageType === 'localStorage') ? maybeStorageType : undefined\n\n        return {\n            storageType: storageType || 'cookie',\n            useStorageAccessAPI: !!searchParams.get('useStorageAccessAPI'),\n        }\n    }, [])\n\n    const [localState, setLocalState] = useState<LocalState>(initValues)\n\n    useEffect(() => {\n        const localStateForSearch: LocalStageForSearch = {\n            storageType: localState.storageType,\n            useStorageAccessAPI: localState.useStorageAccessAPI ? '1' : '',\n        }\n        const searchURLPart = '?' + new URLSearchParams(localStateForSearch).toString()\n        console.log(searchURLPart);\n        window.history.pushState(null, 'local stage change', searchURLPart)\n    }, [localState])\n\n    const setStorageType = useCallback((newStorageType: StorageType) => {\n        setLocalState(prevState => ({ ...prevState, storageType: newStorageType }))\n    }, [])\n\n    const setUseRequestStorageAPI = useCallback((newUseRequestStorageAPI: boolean) => {\n        setLocalState(prevState => ({ ...prevState, useStorageAccessAPI: newUseRequestStorageAPI }))\n    }, [])\n\n    return { localState, setStorageType, setUseRequestStorageAPI }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport { App } from './app'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root'),\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(con§sole.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}